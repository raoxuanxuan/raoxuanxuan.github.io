(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{155:function(r,n,t){"use strict";t.r(n);var e=t(0),i=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var r=this,n=r.$createElement,t=r._self._c||n;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"golang函数型接口理解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#golang函数型接口理解","aria-hidden":"true"}},[r._v("#")]),r._v(" golang函数型接口理解")]),r._v(" "),t("p",[r._v("在go中，当需要传入一个接口类型的形参时，当且仅当某种类型所有实现了这个接口的所有方法时，就可以作为实参传递给这个形参。举个例子")]),r._v(" "),t("p",[t("code",[r._v("func process(contents []string, handler Handler) { ​\tfor _, v := range contents { ​\t\thandler.Do(v) ​\t} }")])]),r._v(" "),t("p",[r._v("上面这个函数会调用hander接口的do方法来处理切片里每一个string。")]),r._v(" "),t("p",[r._v("接口Handler的定义如下：")]),r._v(" "),t("p",[t("code",[r._v("Handler interface { ​\tfunc Do(str string) string }")])]),r._v(" "),t("p",[r._v("如果我们想对每个字符串加一个前缀，我们需要先定义一个结构体来实现这个Handler接口。")]),r._v(" "),t("p",[t("code",[r._v("type prefixString string")])]),r._v(" "),t("p",[t("code",[r._v('func (p prefixString) Do(str string) string { return "prefix" + str }')])]),r._v(" "),t("p",[r._v("然后调用process函数，传入类型为prefiexString的参数即可。")]),r._v(" "),t("p",[r._v("这种方式有一个不方便的地方在于：")]),r._v(" "),t("p",[r._v("即使我们有一个原型满足接口里方法的函数addPrefix:")]),r._v(" "),t("p",[t("code",[r._v('func addPrefix(str string) string { return "prefix" + str }')])]),r._v(" "),t("p",[r._v("也必须再定义一个类型prefixString，让这个类型去实现接口里的Do方法，只不过Do方法就是addPrefix的实现，无法将addPrefix直接传给handler参数。")]),r._v(" "),t("p",[r._v("addPrefix和Do的传参和返回类型都是一样的。")]),r._v(" "),t("p",[r._v("函数型接口其实就是一个转换，把原型满足接口里的方法的函数转化为接口类型。这个函数型接口实现Do方法，实现的代码中，把Do的参数传给自己。")]),r._v(" "),t("p",[t("code",[r._v("type FunctionHandler func(str string) string")])]),r._v(" "),t("p",[t("code",[r._v("func (f FunctionHandler) Do(str string) string { return f(str)}")])]),r._v(" "),t("p",[r._v("然后调用的时候，就不用额外再定义类型去实现Do方法。")]),r._v(" "),t("p",[t("code",[r._v("process(contents, FunctionHandler(addPrefix))")])])])}],!1,null,null,null);i.options.__file="golang函数型接口理解.md";n.default=i.exports}}]);